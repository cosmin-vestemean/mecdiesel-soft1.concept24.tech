<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocumentaÈ›ie Zero Min/Max</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #0d6efd;
            border-bottom: 3px solid #0d6efd;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        h2 {
            color: #0d6efd;
            margin-top: 30px;
            border-left: 4px solid #0d6efd;
            padding-left: 10px;
        }
        h3 {
            color: #495057;
            margin-top: 20px;
        }
        .feature-box {
            background: #f8f9fa;
            border-left: 4px solid #0d6efd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .success-box {
            background: #d1e7dd;
            border-left: 4px solid #198754;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .info-box {
            background: #cff4fc;
            border-left: 4px solid #0dcaf0;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #d63384;
        }
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #0d6efd;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 10px;
            text-align: left;
        }
        th {
            background: #0d6efd;
            color: white;
            font-weight: 600;
        }
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        .icon {
            font-size: 1.2em;
            margin-right: 5px;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <h1><span class="icon">ğŸ“˜</span>DocumentaÈ›ie Zero Min/Max</h1>
    
    <div class="info-box">
        <strong>Despre modul:</strong> FuncÈ›ionalitatea Zero Min/Max permite resetarea valorilor <code>CCCMINAUTO</code> È™i <code>CCCMAXAUTO</code> la 0 pentru articole selectate pe branch-uri selectate, cu tracking complet Ã®n istoric È™i notificÄƒri real-time.
    </div>

    <h2><span class="icon">ğŸ¯</span>Scop È™i Utilizare</h2>
    <p>Modulul este destinat pentru:</p>
    <ul>
        <li><strong>Resetarea valorilor calculate automat</strong> pentru anumite categorii de articole (ex: articole cu prefix "FS")</li>
        <li><strong>Management flexibil</strong> al pragurilor min/max pe branch-uri multiple</li>
        <li><strong>Audit complet</strong> al tuturor operaÈ›iunilor de resetare</li>
    </ul>

    <h2><span class="icon">ğŸ”§</span>PaÈ™i de Utilizare</h2>

    <div class="feature-box">
        <h3><span class="step-number">1</span>Introducere Filtru Cod Material</h3>
        <p>Ãn cÃ¢mpul <strong>"Cod articol"</strong> introduceÈ›i prefixul dorit (implicit: <code>FS</code>)</p>
        <ul>
            <li>Filtrul este <strong>case-sensitive</strong> (FS â‰  fs)</li>
            <li>Se aplicÄƒ automat wildcards: <code>FS</code> â†’ <code>FS%</code> (articole care Ã®ncep cu "FS")</li>
            <li>Exemplu: <code>FS</code> va gÄƒsi FS001234, FS002456, etc.</li>
        </ul>
    </div>

    <div class="feature-box">
        <h3><span class="step-number">2</span>Selectare Branch-uri</h3>
        <p>Click pe dropdown-ul <strong>"Branch-uri"</strong> pentru a selecta/deselecta sucursale:</p>
        <ul>
            <li><strong>Implicit</strong>: toate branch-urile sunt pre-selectate (exceptÃ¢nd HQ - 1000)</li>
            <li><strong>Multiselect</strong>: puteÈ›i selecta orice combinaÈ›ie de branch-uri</li>
            <li><strong>CÄƒutare</strong>: utilizaÈ›i cÃ¢mpul de search pentru a gÄƒsi rapid un branch</li>
            <li><strong>HQ exclus</strong>: Branch-ul 1000 (HQ) este exclus automat din listÄƒ</li>
        </ul>
    </div>

    <div class="feature-box">
        <h3><span class="step-number">3</span>Previzualizare Articole</h3>
        <p>Click pe butonul <strong>ğŸ” Preview</strong> pentru a vedea articolele care vor fi afectate:</p>
        <ul>
            <li>Se afiÈ™eazÄƒ numÄƒrul total de Ã®nregistrÄƒri</li>
            <li>Tabel cu: <strong>Cod</strong>, <strong>Nume</strong>, <strong>Branch</strong>, <strong>Min Auto</strong>, <strong>Max Auto</strong></li>
            <li><strong>Paginare</strong>: navigare prin pagini (50/100/200 Ã®nregistrÄƒri per paginÄƒ)</li>
            <li>VerificaÈ›i cu atenÈ›ie datele Ã®nainte de resetare!</li>
        </ul>
    </div>

    <div class="feature-box">
        <h3><span class="step-number">4</span>Executare Resetare</h3>
        <p>Click pe butonul <strong>ğŸ—‘ï¸ ReseteazÄƒ</strong> pentru a executa operaÈ›iunea:</p>
        <ul>
            <li><strong>Dialog confirmare</strong> cu rezumat complet</li>
            <li>Procesare automatÄƒ: 
                <ul>
                    <li><strong>&lt;500 articole</strong>: procesare rapidÄƒ (sincronÄƒ)</li>
                    <li><strong>&gt;500 articole</strong>: procesare Ã®n batch-uri de cÃ¢te 500 (cu progress bar)</li>
                </ul>
            </li>
            <li><strong>Progress bar</strong> aratÄƒ avansul Ã®n timp real</li>
            <li><strong>NotificÄƒri</strong> la finalizare/eroare</li>
        </ul>
    </div>

    <h2><span class="icon">ğŸ“¦</span>Batch Processing (Volume Mari)</h2>

    <div class="success-box">
        <h3>Procesare OptimizatÄƒ pentru >500 Articole</h3>
        <p>CÃ¢nd numÄƒrul de articole depÄƒÈ™eÈ™te 500, sistemul activeazÄƒ automat <strong>batch processing</strong>:</p>
        
        <table>
            <tr>
                <th>CaracteristicÄƒ</th>
                <th>Detalii</th>
            </tr>
            <tr>
                <td><strong>Chunk Size</strong></td>
                <td>500 articole per batch</td>
            </tr>
            <tr>
                <td><strong>Progress</strong></td>
                <td>"ğŸ“¦ Batch 3/5" + "1500/2341 articole (64%)"</td>
            </tr>
            <tr>
                <td><strong>Timp estimat</strong></td>
                <td>~2 secunde per batch de 500 articole</td>
            </tr>
            <tr>
                <td><strong>Anulare</strong></td>
                <td>Buton "âœ– AnuleazÄƒ" disponibil Ã®n timpul procesÄƒrii</td>
            </tr>
        </table>

        <h4>Buton AnuleazÄƒ</h4>
        <ul>
            <li><strong>Oprire gracioasÄƒ</strong>: procesarea se opreÈ™te dupÄƒ batch-ul curent</li>
            <li><strong>Articole procesate</strong>: rÄƒmÃ¢n resetate (nu se face rollback automat)</li>
            <li><strong>Articole neprocesate</strong>: rÄƒmÃ¢n neschimbate</li>
            <li><strong>Mesaj informativ</strong>: "âš ï¸ Procesare anulatÄƒ. X din Y Ã®nregistrÄƒri au fost resetate."</li>
        </ul>
    </div>

    <h2><span class="icon">ğŸ“œ</span>Istoric ResetÄƒri</h2>
    
    <p>Click pe <strong>"AratÄƒ istoric"</strong> pentru a vizualiza toate operaÈ›iunile anterioare:</p>
    
    <table>
        <tr>
            <th>ColoanÄƒ</th>
            <th>Descriere</th>
        </tr>
        <tr>
            <td><strong>Data</strong></td>
            <td>Timestamp resetare (format: DD.MM.YYYY HH:mm:ss)</td>
        </tr>
        <tr>
            <td><strong>Batch ID</strong></td>
            <td>Identificator unic al operaÈ›iunii (ex: zero_1733150400000_abc123)</td>
        </tr>
        <tr>
            <td><strong>Filtru</strong></td>
            <td>Filtrul de cod material folosit (ex: FS%)</td>
        </tr>
        <tr>
            <td><strong>Sucursale</strong></td>
            <td>NumÄƒr de sucursale afectate (ex: "5 sucursale")</td>
        </tr>
        <tr>
            <td><strong>Total Reset</strong></td>
            <td>NumÄƒr total de Ã®nregistrÄƒri resetate</td>
        </tr>
        <tr>
            <td><strong>AcÈ›iuni</strong></td>
            <td>Buton <strong>"ğŸ‘ï¸ Vezi detalii"</strong> - deschide modal cu toate articolele resetate</td>
        </tr>
    </table>

    <div class="success-box">
        <h3>âœ¨ FuncÈ›ionalitate: Vezi Detalii Batch</h3>
        <p>Click pe butonul <strong>"ğŸ‘ï¸ Vezi detalii"</strong> din coloana "AcÈ›iuni" pentru a deschide un modal cu toate articolele din acel batch:</p>
        
        <h4>Ce vedeÈ›i Ã®n modal:</h4>
        <ul>
            <li><strong>Header informativ</strong>:
                <ul>
                    <li>Data È™i ora resetÄƒrii</li>
                    <li>Filtrul folosit (ex: "FS%")</li>
                    <li>Total Ã®nregistrÄƒri Ã®n batch</li>
                </ul>
            </li>
            <li><strong>Tabel detaliat cu toate articolele</strong>:
                <ul>
                    <li><strong>Cod</strong> - Codul articolului (ex: FS001234)</li>
                    <li><strong>Denumire Material</strong> - Numele complet al articolului</li>
                    <li><strong>Sucursala</strong> - Codul branch-ului (ex: 1200)</li>
                    <li><strong>Nume SucursalÄƒ</strong> - Denumirea branch-ului (ex: CLUJ)</li>
                    <li><strong>Min Auto Vechi</strong> - Valoarea CCCMINAUTO Ã®nainte de resetare (badge galben dacÄƒ >0)</li>
                    <li><strong>Max Auto Vechi</strong> - Valoarea CCCMAXAUTO Ã®nainte de resetare (badge galben dacÄƒ >0)</li>
                </ul>
            </li>
            <li><strong>Paginare</strong>: Navigare prin pagini dacÄƒ sunt multe Ã®nregistrÄƒri (50 per paginÄƒ)</li>
        </ul>
        
        <h4>Cazuri de utilizare:</h4>
        <ul>
            <li><strong>Audit</strong>: VerificaÈ›i ce articole au fost resetate Ã®ntr-o anumitÄƒ operaÈ›iune</li>
            <li><strong>Recuperare date</strong>: VedeÈ›i valorile vechi min/max pentru a le restaura manual dacÄƒ este necesar</li>
            <li><strong>Validare</strong>: ConfirmaÈ›i cÄƒ resetarea a afectat articolele corecte pe branch-urile corecte</li>
            <li><strong>Documentare</strong>: Export/screenshot pentru raportare cÄƒtre management</li>
        </ul>
    </div>

    <div class="info-box">
        <strong>ğŸ’¡ Tip:</strong> Istoricul este pÄƒstrat permanent Ã®n tabelul <code>CCCZEROMINMAX</code> pentru audit complet. Include valorile vechi (<code>OLD_CCCMINAUTO</code>, <code>OLD_CCCMAXAUTO</code>) pentru fiecare articol resetat.
    </div>

    <h2><span class="icon">âš™ï¸</span>Criterii de SelecÈ›ie Articole</h2>

    <div class="feature-box">
        <p>Sistemul selecteazÄƒ articolele care Ã®ndeplinesc <strong>toate</strong> condiÈ›iile:</p>
        <ol>
            <li><strong>Cod material</strong> Ã®ncepe cu filtrul specificat (ex: <code>FS</code>)</li>
            <li><strong>Branch-ul</strong> este Ã®n lista selectatÄƒ</li>
            <li><strong>CCCMINAUTO â‰  0</strong> SAU <strong>CCCMAXAUTO â‰  0</strong> (cel puÈ›in una din valori diferitÄƒ de 0)</li>
            <li>Articolul este <strong>activ</strong> Ã®n sistem</li>
        </ol>
    </div>

    <h2><span class="icon">âš ï¸</span>Avertismente È™i PrecauÈ›ii</h2>

    <div class="warning-box">
        <h3>âš ï¸ AtenÈ›ie!</h3>
        <ul>
            <li><strong>AcÈ›iune ireversibilÄƒ</strong>: Resetarea valorilor NU poate fi anulatÄƒ automat din interfaÈ›Äƒ</li>
            <li><strong>Verificare obligatorie</strong>: UtilizaÈ›i Ã®ntotdeauna <strong>Preview</strong> Ã®nainte de resetare</li>
            <li><strong>HQ exclus</strong>: Branch-ul 1000 (HQ) nu apare niciodatÄƒ Ã®n listÄƒ</li>
            <li><strong>Valori rÄƒmÃ¢n la 0</strong>: DupÄƒ resetare, valorile CCCMINAUTO È™i CCCMAXAUTO rÄƒmÃ¢n la 0 pÃ¢nÄƒ cÃ¢nd sunt actualizate manual sau printr-un proces dedicat de recalculare</li>
        </ul>
    </div>

    <h2><span class="icon">ğŸ””</span>NotificÄƒri Real-Time</h2>

    <p>Modulul utilizeazÄƒ <strong>FeathersJS Channels</strong> pentru notificÄƒri Ã®n timp real:</p>
    
    <div class="success-box">
        <h3>Ce notificÄƒri primiÈ›i?</h3>
        <ul>
            <li><strong>Proces pornit</strong>: "ğŸš€ Utilizatorul X a pornit o resetare..."</li>
            <li><strong>Progres</strong>: Actualizare progress bar Ã®n timp real</li>
            <li><strong>Finalizare</strong>: "âœ… Reset complet! X Ã®nregistrÄƒri actualizate"</li>
            <li><strong>Eroare</strong>: "âŒ Eroare la procesare: [detalii]"</li>
            <li><strong>Anulare</strong>: "âš ï¸ Procesare anulatÄƒ. X din Y Ã®nregistrÄƒri resetate"</li>
        </ul>
        
        <p><strong>Multi-user sync:</strong> DacÄƒ doi utilizatori au modulul deschis simultan, ambii vÄƒd progresul Ã®n timp real!</p>
    </div>

    <h2><span class="icon">ğŸ›</span>Debug Mode</h2>

    <div class="info-box">
        <p>Pentru dezvoltatori È™i testare:</p>
        <ul>
            <li>DeschideÈ›i <strong>Developer Console</strong> (F12)</li>
            <li>SetaÈ›i <code>document.querySelector('zero-minmax-panel').debugMode = true</code></li>
            <li>Click pe <strong>ReseteazÄƒ</strong> â†’ veÈ›i vedea query-ul SQL fÄƒrÄƒ a-l executa</li>
            <li>Util pentru verificare query-uri Ã®nainte de rulare Ã®n producÈ›ie</li>
        </ul>
    </div>

    <h2><span class="icon">ğŸ“Š</span>Exemple de Utilizare</h2>

    <h3>Exemplul 1: Resetare prefix "FS"</h3>
    <ol>
        <li>Filtru cod: <code>FS</code></li>
        <li>Selectare: toate branch-urile</li>
        <li>Preview: 1,234 articole gÄƒsite</li>
        <li>Resetare: 1,234 Ã®nregistrÄƒri (FS001234, FS002456, etc.)</li>
        <li>Rezultat: <code>CCCMINAUTO = 0</code>, <code>CCCMAXAUTO = 0</code> pentru toate</li>
    </ol>

    <h3>Exemplul 2: Resetare SelectivÄƒ pe 3 Branch-uri</h3>
    <ol>
        <li>Filtru cod: <code>OE</code></li>
        <li>Selectare: CLUJ (1200), CONSTANTA (1300), GALATI (1400)</li>
        <li>Preview: 450 articole gÄƒsite</li>
        <li>Resetare: procesare rapidÄƒ (sincronÄƒ)</li>
        <li>Rezultat: 450 Ã®nregistrÄƒri resetate doar pe cele 3 branch-uri</li>
    </ol>

    <h3>Exemplul 3: Volume Mari cu Batch Processing</h3>
    <ol>
        <li>Filtru cod: <code>BR</code></li>
        <li>Selectare: toate branch-urile (14 branch-uri)</li>
        <li>Preview: 2,341 articole gÄƒsite</li>
        <li>Resetare: procesare Ã®n 5 batch-uri (500+500+500+500+341)</li>
        <li>Progress: "ğŸ“¦ Batch 3/5 - 1500/2341 articole (64%)"</li>
        <li>Timp total: ~10 secunde</li>
        <li>Rezultat: 2,341 Ã®nregistrÄƒri resetate cu succes</li>
    </ol>

    <h2><span class="icon">â“</span>ÃntrebÄƒri Frecvente</h2>

    <h3>Ce se Ã®ntÃ¢mplÄƒ dacÄƒ anulezi procesarea?</h3>
    <p>Articolele procesate pÃ¢nÄƒ Ã®n momentul anulÄƒrii <strong>rÄƒmÃ¢n resetate</strong>. Nu se face rollback automat. PuteÈ›i rula din nou procesarea pentru articolele rÄƒmase neprocesate.</p>

    <h3>Pot anula o resetare dupÄƒ finalizare?</h3>
    <p>Nu direct din interfaÈ›Äƒ. Valorile vechi sunt salvate Ã®n tabelul <code>CCCZEROMINMAX</code> (coloanele <code>OLD_CCCMINAUTO</code>, <code>OLD_CCCMAXAUTO</code>). Pentru a vedea valorile vechi È™i pentru eventuale restaurÄƒri manuale, utilizaÈ›i butonul <strong>"Vezi detalii"</strong> din istoric. Pentru rollback automat, contactaÈ›i administratorul.</p>

    <h3>De ce HQ (1000) nu apare Ã®n listÄƒ?</h3>
    <p>Branch-ul 1000 (Headquarter) este exclus automat din procesare pentru a preveni resetÄƒri accidentale la nivel central.</p>

    <h3>Cum È™tiu dacÄƒ o resetare a fost executatÄƒ cu succes?</h3>
    <p>VerificaÈ›i:</p>
    <ul>
        <li>Mesaj de succes: "âœ… Reset complet! X Ã®nregistrÄƒri actualizate"</li>
        <li>Istoric: click pe "AratÄƒ istoric" â†’ vedeÈ›i batch-ul nou creat</li>
        <li>Preview: rulaÈ›i din nou preview â†’ ar trebui sÄƒ returneze 0 articole (dacÄƒ toate au fost resetate)</li>
    </ul>

    <h3>Ce Ã®nseamnÄƒ "Procesare Ã®n batch-uri"?</h3>
    <p>Pentru volume mari (&gt;500 articole), sistemul Ã®mparte procesarea Ã®n grupuri de cÃ¢te 500 pentru a evita timeout-uri È™i a oferi progress granular. Este automat È™i transparent pentru utilizator.</p>

    <h2><span class="icon">ğŸ“</span>Suport</h2>

    <div class="info-box">
        <p><strong>Pentru probleme sau Ã®ntrebÄƒri:</strong></p>
        <ul>
            <li>VerificaÈ›i consolÄƒ (F12) pentru erori detaliate</li>
            <li>ConsultaÈ›i istoricul pentru a verifica operaÈ›iuni anterioare</li>
            <li>ContactaÈ›i echipa de development pentru asistenÈ›Äƒ tehnicÄƒ</li>
        </ul>
    </div>

    <hr style="margin: 40px 0; border: none; border-top: 2px solid #dee2e6;">
    
    <p style="text-align: center; color: #6c757d; font-size: 0.9em;">
        <strong>Zero Min/Max Module</strong> | Versiunea 1.0 | Â© 2026 Dubhe
    </p>

</body>
</html>
